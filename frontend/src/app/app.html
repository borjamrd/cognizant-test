<div class="container">
  <div class="hero-container">
    <img src="/assets/hero.gif" alt="Cargando..." width="auto" height="240" />
  </div>
  <h1>Upload candidate</h1>

  <form
    [formGroup]="candidateForm"
    (ngSubmit)="submit()"
    class="candidate-form"
  >
    <mat-form-field appearance="outline">
      <mat-label>Name</mat-label>
      <input matInput formControlName="name" placeholder="John" />
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Lastname</mat-label>
      <input matInput formControlName="surname" placeholder="Doe" />
    </mat-form-field>

    <div class="file-input-container">
      <button mat-stroked-button (click)="downloadTemplate($event)">
        <mat-icon>download</mat-icon>
        Download template
      </button>
      <button
        type="button"
        mat-stroked-button
        color="accent"
        (click)="fileInput.click()"
      >
        <mat-icon>upload_file</mat-icon>
        {{ selectedFile ? selectedFile.name : 'Upload excel file' }}
      </button>
      <input
        hidden
        (change)="onFileSelected($event)"
        #fileInput
        type="file"
        accept=".xlsx, .xls"
      />
    </div>

    <button
      mat-raised-button
      color="primary"
      type="submit"
      [disabled]="candidateForm.invalid"
    >
      Proccess candidate
    </button>
  </form>

  <hr />

  <h2>Candidates list</h2>

  <table mat-table [dataSource]="candidates()" class="mat-elevation-z8">
    <ng-container matColumnDef="name">
      <th mat-header-cell *matHeaderCellDef>Name</th>
      <td mat-cell *matCellDef="let element">{{ element.name }}</td>
    </ng-container>

    <ng-container matColumnDef="surname">
      <th mat-header-cell *matHeaderCellDef>Surname</th>
      <td mat-cell *matCellDef="let element">{{ element.surname }}</td>
    </ng-container>

    <ng-container matColumnDef="seniority">
      <th mat-header-cell *matHeaderCellDef>Seniority</th>
      <td mat-cell *matCellDef="let element">
        {{ element.seniority | titlecase }}
      </td>
    </ng-container>

    <ng-container matColumnDef="years">
      <th mat-header-cell *matHeaderCellDef>Years</th>
      <td mat-cell *matCellDef="let element">{{ element.years }}</td>
    </ng-container>

    <ng-container matColumnDef="availability">
      <th mat-header-cell *matHeaderCellDef>Availability</th>
      <td mat-cell *matCellDef="let element">
        <mat-icon [color]="element.availability ? 'primary' : 'warn'">
          {{ element.availability ? 'check_circle' : 'cancel' }}
        </mat-icon>
      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
  </table>
</div>
